<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Prof. Adriano Barbosa - blog</title><link href="https://adrianobarbosa.xyz/" rel="alternate"></link><link href="https://adrianobarbosa.xyz/feeds/blog.atom.xml" rel="self"></link><id>https://adrianobarbosa.xyz/</id><updated>2019-05-20T20:20:00-04:00</updated><entry><title>OpenBSD 6.5 arm64 (aarch64) on QEMU</title><link href="https://adrianobarbosa.xyz/blog/qemu-arm64.html" rel="alternate"></link><published>2019-05-19T17:02:00-04:00</published><updated>2019-05-20T20:20:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2019-05-19:/blog/qemu-arm64.html</id><summary type="html">&lt;h2&gt;Using OpenBSD 6.5 arm64 (aarch64) on QEMU&lt;/h2&gt;
&lt;p&gt;Install QEMU&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;doas&lt;/span&gt; &lt;span class="n"&gt;pkg_add&lt;/span&gt; &lt;span class="n"&gt;qemu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Download QEMU EFI&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ftp&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;releases&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linaro&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;components&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;uefi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linaro&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;qemu64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;QEMU_EFI&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Download OpenBSD 6.5 arm64 install media&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ftp&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;cdn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;openbsd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OpenBSD&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;arm64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;miniroot65&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create â€¦&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Using OpenBSD 6.5 arm64 (aarch64) on QEMU&lt;/h2&gt;
&lt;p&gt;Install QEMU&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;doas&lt;/span&gt; &lt;span class="n"&gt;pkg_add&lt;/span&gt; &lt;span class="n"&gt;qemu&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Download QEMU EFI&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ftp&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;releases&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linaro&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;components&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;uefi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linaro&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;qemu64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;QEMU_EFI&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Download OpenBSD 6.5 arm64 install media&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ftp&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;cdn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;openbsd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OpenBSD&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;arm64&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;miniroot65&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create the disk image&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;qcow2&lt;/span&gt; &lt;span class="n"&gt;obsd&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;arm64&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;qcow2&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Start the virtual machine&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;system&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;aarch64&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;M&lt;/span&gt; &lt;span class="nv"&gt;virt&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;cpu&lt;/span&gt; &lt;span class="nv"&gt;cortex&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;a57&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;bios&lt;/span&gt; &lt;span class="nv"&gt;QEMU_EFI&lt;/span&gt;.&lt;span class="nv"&gt;fd&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;drive&lt;/span&gt; &lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;miniroot65&lt;/span&gt;.&lt;span class="nv"&gt;fs&lt;/span&gt;,&lt;span class="nv"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;raw&lt;/span&gt;,&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;drive1&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;drive&lt;/span&gt; &lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;obsd&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;arm64&lt;/span&gt;.&lt;span class="nv"&gt;qcow2&lt;/span&gt;,&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;none&lt;/span&gt;,&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;drive0&lt;/span&gt;,&lt;span class="nv"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;qcow2&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt; &lt;span class="nv"&gt;virtio&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;blk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt;,&lt;span class="nv"&gt;drive&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;drive0&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;nographic&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;serial&lt;/span&gt; &lt;span class="nv"&gt;tcp&lt;/span&gt;::&lt;span class="mi"&gt;4450&lt;/span&gt;,&lt;span class="nv"&gt;server&lt;/span&gt;,&lt;span class="nv"&gt;telnet&lt;/span&gt;,&lt;span class="k"&gt;wait&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In another terminal, connect to the virtual machine serial console&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;telnet&lt;/span&gt; &lt;span class="n"&gt;localhost&lt;/span&gt; &lt;span class="mi"&gt;4450&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Follow OpenBSD install and finish the installation.&lt;/p&gt;
&lt;p&gt;From now on we can start the virtual machine without the install media&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;system&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;aarch64&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;M&lt;/span&gt; &lt;span class="nv"&gt;virt&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;cpu&lt;/span&gt; &lt;span class="nv"&gt;cortex&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;a57&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;bios&lt;/span&gt; &lt;span class="nv"&gt;QEMU_EFI&lt;/span&gt;.&lt;span class="nv"&gt;fd&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;drive&lt;/span&gt; &lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;obsd&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;arm64&lt;/span&gt;.&lt;span class="nv"&gt;qcow2&lt;/span&gt;,&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;none&lt;/span&gt;,&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;drive0&lt;/span&gt;,&lt;span class="nv"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;qcow2&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt; &lt;span class="nv"&gt;virtio&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;blk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt;,&lt;span class="nv"&gt;drive&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;drive0&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;nographic&lt;/span&gt; \
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;serial&lt;/span&gt; &lt;span class="nv"&gt;tcp&lt;/span&gt;::&lt;span class="mi"&gt;4450&lt;/span&gt;,&lt;span class="nv"&gt;server&lt;/span&gt;,&lt;span class="nv"&gt;telnet&lt;/span&gt;,&lt;span class="k"&gt;wait&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Source: https://cryogenix.net/OpenBSD_arm64_qemu.html&lt;/p&gt;</content><category term="comp"></category></entry><entry><title>Running OpenBSD on Vultr, check your clock!</title><link href="https://adrianobarbosa.xyz/blog/openbsd-on-vultr.html" rel="alternate"></link><published>2018-11-06T16:40:00-03:00</published><updated>2018-11-06T16:40:00-03:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-11-06:/blog/openbsd-on-vultr.html</id><summary type="html">&lt;p&gt;Recently I noticed a problem with the clock on my OpenBSD virtual machine
running on Vultr. The clock on the virtual machine was off by days frequently.
Investigating the problem, I noticed that &lt;code&gt;top&lt;/code&gt; was not updating the
information each 5s as it should and &lt;code&gt;sleep 1&lt;/code&gt; was taking more â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently I noticed a problem with the clock on my OpenBSD virtual machine
running on Vultr. The clock on the virtual machine was off by days frequently.
Investigating the problem, I noticed that &lt;code&gt;top&lt;/code&gt; was not updating the
information each 5s as it should and &lt;code&gt;sleep 1&lt;/code&gt; was taking more than 1s to run.&lt;/p&gt;
&lt;p&gt;After some research, Google lead me to this &lt;a href="https://www.reddit.com/r/openbsd/comments/7yg56t/have_openbsd_in_vultr_check_your_clock/"&gt;Reddit
post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The problem is related with some configuration on the virtualization software
Vultr uses. After calling the support, they fixed it for me &lt;strong&gt;very fast&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;As I'm a n00b, &lt;strong&gt;it was my fault&lt;/strong&gt;... I decided to install my virtual machine
as a custom OS using an uploaded image of OpenBSD while Vultr provides an
OpenBSD virtual machine wich runs without this problem as described by their
support "deploying with one of our images from the Vultr control panel would
automatically apply the necessary adjustments".&lt;/p&gt;</content><category term="comp"></category></entry><entry><title>OpenBSD 6.3 live USB</title><link href="https://adrianobarbosa.xyz/blog/openbsd-live.html" rel="alternate"></link><published>2018-07-14T22:53:00-04:00</published><updated>2018-07-14T22:53:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-07-14:/blog/openbsd-live.html</id><summary type="html">&lt;h2&gt;Using OpenBSD 6.3 and vmd(8)&lt;/h2&gt;
&lt;p&gt;Create the disk image&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;vmctl&lt;/span&gt; &lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Start the virtual machine booting bsd.rd kernel, &lt;code&gt;disk.img&lt;/code&gt; as disk,
&lt;code&gt;install63.iso&lt;/code&gt; as cdrom and 512M of memory&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;vmctl&lt;/span&gt; &lt;span class="k"&gt;start&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;live&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bsd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;to â€¦&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2&gt;Using OpenBSD 6.3 and vmd(8)&lt;/h2&gt;
&lt;p&gt;Create the disk image&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;vmctl&lt;/span&gt; &lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Start the virtual machine booting bsd.rd kernel, &lt;code&gt;disk.img&lt;/code&gt; as disk,
&lt;code&gt;install63.iso&lt;/code&gt; as cdrom and 512M of memory&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;vmctl&lt;/span&gt; &lt;span class="k"&gt;start&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;live&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bsd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;install63&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iso&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Follow OpenBSD install, but when asked if you would like to change default
console answer &lt;code&gt;no&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;console&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;com0&lt;/span&gt;&lt;span class="vm"&gt;?&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;no&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and finish the installation.&lt;/p&gt;
&lt;p&gt;Now we are ready to &lt;code&gt;dd(1)&lt;/code&gt; the disk to our USB stick &lt;code&gt;rsdX&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;disk&lt;/span&gt;.&lt;span class="nv"&gt;img&lt;/span&gt; &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;rsdXc&lt;/span&gt; &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The USB stick is ready to boot.&lt;/p&gt;
&lt;h2&gt;Using GNU/Linux and QEMU&lt;/h2&gt;
&lt;p&gt;Create &lt;code&gt;disk.img&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Start a virtual machine using &lt;code&gt;disk.img&lt;/code&gt; as hard drive, booting from first
cdrom, &lt;code&gt;install63.iso&lt;/code&gt; as cdrom and 512M of memory&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;system&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hda&lt;/span&gt; &lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cdrom&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;install63&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iso&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Follow OpenBSD install to the end.&lt;/p&gt;
&lt;p&gt;Now we are ready to &lt;code&gt;dd(1)&lt;/code&gt; the disk to our USB stick &lt;code&gt;sdX&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;disk&lt;/span&gt;.&lt;span class="nv"&gt;img&lt;/span&gt; &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;sdX&lt;/span&gt; &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;M&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The USB stick is now ready to boot.&lt;/p&gt;</content><category term="comp"></category></entry><entry><title>Encrypt partition in OpenBSD 6.3</title><link href="https://adrianobarbosa.xyz/blog/encrypt-partition-openbsd.html" rel="alternate"></link><published>2018-07-07T20:24:00-04:00</published><updated>2018-07-07T20:24:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-07-07:/blog/encrypt-partition-openbsd.html</id><summary type="html">&lt;p&gt;This post is meant to guide througt encrypt a specific partition in OpenBSD
6.3. We will encrypt &lt;code&gt;/home&lt;/code&gt; partition:&lt;/p&gt;
&lt;p&gt;Umount &lt;code&gt;/home&lt;/code&gt; partition&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;umount&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Suppose your system is running on disk sdX.  Discover the identifier of &lt;code&gt;/home&lt;/code&gt;
partition&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;disklabel&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;E&lt;/span&gt; &lt;span class="nv"&gt;sdX&lt;/span&gt;
&lt;span class="nv"&gt;Label&lt;/span&gt; &lt;span class="nv"&gt;editor&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;enter&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s"&gt;?&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;help&lt;/span&gt; &lt;span class="nv"&gt;at&lt;/span&gt; &lt;span class="nv"&gt;ane&lt;/span&gt; &lt;span class="nv"&gt;prompt â€¦&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;This post is meant to guide througt encrypt a specific partition in OpenBSD
6.3. We will encrypt &lt;code&gt;/home&lt;/code&gt; partition:&lt;/p&gt;
&lt;p&gt;Umount &lt;code&gt;/home&lt;/code&gt; partition&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;umount&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Suppose your system is running on disk sdX.  Discover the identifier of &lt;code&gt;/home&lt;/code&gt;
partition&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;disklabel&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;E&lt;/span&gt; &lt;span class="nv"&gt;sdX&lt;/span&gt;
&lt;span class="nv"&gt;Label&lt;/span&gt; &lt;span class="nv"&gt;editor&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;enter&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s"&gt;?&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;help&lt;/span&gt; &lt;span class="nv"&gt;at&lt;/span&gt; &lt;span class="nv"&gt;ane&lt;/span&gt; &lt;span class="nv"&gt;prompt&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nv"&gt;p&lt;/span&gt; &lt;span class="nv"&gt;g&lt;/span&gt;
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;in my disk the &lt;code&gt;/home&lt;/code&gt; patition is &lt;code&gt;m:&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Still in disklabel, change &lt;code&gt;/home&lt;/code&gt; file system type&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;
&lt;span class="k"&gt;offset&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[...]&lt;/span&gt;
&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[...]&lt;/span&gt;
&lt;span class="n"&gt;FS&lt;/span&gt; &lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;BSD&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;RAID&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Write random data to avoid data recovery and protect the encrypted data (this
can be a very time-consuming process, depending on the speed of your CPU and
disk, as well as the size of the disk)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;random&lt;/span&gt; &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;rsdXm&lt;/span&gt; &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we attach &lt;code&gt;sdXm&lt;/code&gt; as a crypto volume&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;bioctl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;c&lt;/span&gt; &lt;span class="k"&gt;C&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdXm&lt;/span&gt; &lt;span class="n"&gt;softraid0&lt;/span&gt;
&lt;span class="k"&gt;New&lt;/span&gt; &lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;Re&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;softraid0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CRYPTO&lt;/span&gt; &lt;span class="n"&gt;volume&lt;/span&gt; &lt;span class="n"&gt;attached&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;sdY&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that our crypto volume is now identified as &lt;code&gt;sdY&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let's now zero the first megabyte of &lt;code&gt;sdY&lt;/code&gt; to clean the master boot record and
disklabel &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;dd&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;zero&lt;/span&gt; &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;rsdYc&lt;/span&gt; &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we create a partition on &lt;code&gt;sdY&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# &lt;span class="nv"&gt;fdisk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;iy&lt;/span&gt; &lt;span class="nv"&gt;sdY&lt;/span&gt;
# &lt;span class="nv"&gt;disklabel&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;E&lt;/span&gt; &lt;span class="nv"&gt;sdY&lt;/span&gt;
&lt;span class="nv"&gt;Label&lt;/span&gt; &lt;span class="nv"&gt;editor&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;enter&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s"&gt;?&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;help&lt;/span&gt; &lt;span class="nv"&gt;at&lt;/span&gt; &lt;span class="nv"&gt;ane&lt;/span&gt; &lt;span class="nv"&gt;prompt&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nv"&gt;a&lt;/span&gt;
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Format the partition&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;newfs&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rsdYa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Delete or comment &lt;code&gt;/home&lt;/code&gt; entry in &lt;code&gt;/etc/fstab&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Get the disks uid&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;disklabel&lt;/span&gt; &lt;span class="n"&gt;sdX&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="n"&gt;uid&lt;/span&gt;
&lt;span class="n"&gt;duid&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="n"&gt;abc&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;disklabel&lt;/span&gt; &lt;span class="n"&gt;sdY&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="n"&gt;uid&lt;/span&gt;
&lt;span class="n"&gt;duid&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;789&lt;/span&gt;&lt;span class="n"&gt;xyz&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We need to mount the crypto volume during the boot. Add the following lines to
start up script &lt;code&gt;/etc/rc.local&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;i&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="c1"&gt;; do  # tries to mount 3 times&lt;/span&gt;
    &lt;span class="nv"&gt;bioctl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="nv"&gt;C&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;l&lt;/span&gt; &lt;span class="mi"&gt;123&lt;/span&gt;&lt;span class="nv"&gt;abc&lt;/span&gt;.&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="nv"&gt;softraid0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;break&lt;/span&gt;  # &lt;span class="nv"&gt;attach&lt;/span&gt; &lt;span class="nv"&gt;sdXm&lt;/span&gt; &lt;span class="nv"&gt;as&lt;/span&gt; &lt;span class="nv"&gt;crypto&lt;/span&gt; &lt;span class="nv"&gt;volume&lt;/span&gt;
    &lt;span class="nv"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;  # &lt;span class="k"&gt;wait&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;seconds&lt;/span&gt; &lt;span class="nv"&gt;between&lt;/span&gt; &lt;span class="nv"&gt;tries&lt;/span&gt;
&lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;fsck&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;rsdYa&lt;/span&gt;  # &lt;span class="nv"&gt;check&lt;/span&gt; &lt;span class="nv"&gt;crypto&lt;/span&gt; &lt;span class="nv"&gt;volume&lt;/span&gt; &lt;span class="nv"&gt;fs&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;error&lt;/span&gt;
&lt;span class="nv"&gt;mount&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;o&lt;/span&gt; &lt;span class="nv"&gt;rw&lt;/span&gt;,&lt;span class="nv"&gt;nodev&lt;/span&gt;,&lt;span class="nv"&gt;nosuid&lt;/span&gt;,&lt;span class="nv"&gt;softdep&lt;/span&gt; &lt;span class="mi"&gt;789&lt;/span&gt;&lt;span class="nv"&gt;xyz&lt;/span&gt;.&lt;span class="nv"&gt;a&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;  # &lt;span class="nv"&gt;mount&lt;/span&gt; &lt;span class="nv"&gt;partition&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And we are done! Your system is ready to boot with the &lt;code&gt;/home&lt;/code&gt; partition
enctypted and ready to mount at boot.&lt;/p&gt;
&lt;p&gt;Last note: &lt;code&gt;/home&lt;/code&gt; partition is completelly empty, so if you have any user other
than root on your system, you need to create each user directory and set the
right permitions.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href="http://astro-gr.org/openbsd-encrypt-home/"&gt;http://astro-gr.org/openbsd-encrypt-home/&lt;/a&gt;&lt;/p&gt;</content><category term="comp"></category></entry><entry><title>Determinando o preÃ§o de um produto</title><link href="https://adrianobarbosa.xyz/blog/determinando-o-preco-de-um-produto.html" rel="alternate"></link><published>2018-07-06T08:50:00-04:00</published><updated>2018-07-06T08:50:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-07-06:/blog/determinando-o-preco-de-um-produto.html</id><summary type="html">&lt;p&gt;Suponha que um vendedor de paÃ§oca venda seu produto a R&amp;#36; 5,00 e que no
mÃªs de junho, durante as festas juninas, ele fez uma promoÃ§Ã£o e vendeu cada
paÃ§oca a R&amp;#36; 4,00. Nesse perÃ­odo ele notou que vendeu 30 unidades a mais que as
100 que costumava â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Suponha que um vendedor de paÃ§oca venda seu produto a R&amp;#36; 5,00 e que no
mÃªs de junho, durante as festas juninas, ele fez uma promoÃ§Ã£o e vendeu cada
paÃ§oca a R&amp;#36; 4,00. Nesse perÃ­odo ele notou que vendeu 30 unidades a mais que as
100 que costumava vender por mÃªs.&lt;/p&gt;
&lt;p&gt;Como podemos ajudar nosso amigo vendedor a determinar o preÃ§o da paÃ§oca de modo
a obter o maior faturamento possÃ­vel? De outro modo, qual deve ser o desconto ideal para
que a faturamento do vendedor seja mÃ¡ximo?&lt;/p&gt;
&lt;p&gt;Vamos assumir que a relaÃ§Ã£o entre o preÃ§o e o nÃºmero de unidades vendidas se
mantenha, ou seja, que cada R&amp;#36; 1,00 de desconto resulte em 30 unidades vendidas a
mais. Vejamos alguns nÃºmeros:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;PreÃ§o unitÃ¡rio&lt;/th&gt;
&lt;th&gt;Vendas&lt;/th&gt;
&lt;th&gt;Faturamento do mÃªs&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;R$ 2,00&lt;/td&gt;
&lt;td&gt;190&lt;/td&gt;
&lt;td&gt;R$ 380,00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;R$ 3,00&lt;/td&gt;
&lt;td&gt;160&lt;/td&gt;
&lt;td&gt;R$ 480,00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;R$ 4,00&lt;/td&gt;
&lt;td&gt;130&lt;/td&gt;
&lt;td&gt;R$ 520,00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;R$ 5,00&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;100&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;R$ 500,00&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;R$ 6,00&lt;/td&gt;
&lt;td&gt;70&lt;/td&gt;
&lt;td&gt;R$ 420,00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;R$ 7,00&lt;/td&gt;
&lt;td&gt;40&lt;/td&gt;
&lt;td&gt;R$ 280,00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Observe que sÃ£o vendidas &lt;span class="math"&gt;\(100+30x\)&lt;/span&gt; unidades sempre que reduzimos &lt;span class="math"&gt;\(x\)&lt;/span&gt; reais
no preÃ§o unitÃ¡rio da paÃ§oca. Dessa forma, se o preÃ§o unitÃ¡rio for &lt;span class="math"&gt;\(5-x\)&lt;/span&gt;, serÃ£o vendidos
&lt;span class="math"&gt;\(100+30x\)&lt;/span&gt; unidades e o faturamento serÃ¡ de &lt;span class="math"&gt;\((100+30x)(5-x)\)&lt;/span&gt; reais.&lt;/p&gt;
&lt;p&gt;Como&lt;/p&gt;
&lt;div class="math"&gt;$$(100+30x)(5-x) = 500-100x+150x-30x^2 = 500+50x-30x^2$$&lt;/div&gt;
&lt;p&gt;a funÃ§Ã£o quadrÃ¡tica &lt;span class="math"&gt;\(F(x) = 500+50x-30x^2\)&lt;/span&gt; nos dÃ¡ o faturamento obtido a cada &lt;span class="math"&gt;\(x\)&lt;/span&gt;
reais de desconto no preÃ§o inicial de R$ 5,00.&lt;/p&gt;
&lt;p&gt;Para resolver nosso problema, basta descobrir para qual valor de &lt;span class="math"&gt;\(x\)&lt;/span&gt; (desconto
ideal) a funÃ§Ã£o &lt;span class="math"&gt;\(F\)&lt;/span&gt; atinge seu valor mÃ¡ximo (maior faturamento possÃ­vel).
Completanto o quadrado:&lt;/p&gt;
&lt;div class="math"&gt;$$F(x) = 500+50x-30x^2 = -30\left(x-\frac{5}{6}\right)^2 + \frac{3125}{6}$$&lt;/div&gt;
&lt;p&gt;Mas, &lt;span class="math"&gt;\(\left(x-\frac{5}{6}\right)^2 \ge 0\)&lt;/span&gt;, pois o quadrado de qualquer nÃºmero real Ã© sempre &lt;span class="math"&gt;\(\ge 0\)&lt;/span&gt;.
Assim, &lt;span class="math"&gt;\(-30\left(x-\frac{5}{6}\right)^2 \le 0\)&lt;/span&gt; qualquer que seja o nÃºmero real
&lt;span class="math"&gt;\(x\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Logo, o maior valor alcanÃ§ado por &lt;span class="math"&gt;\(F\)&lt;/span&gt; Ã©
&lt;span class="math"&gt;\(\frac{3125}{6} \approx 520,83\)&lt;/span&gt; e Ã© obtido quando &lt;span class="math"&gt;\(-30\left(x-\frac{5}{6}\right)^2=0 \Rightarrow
x=\frac{5}{6} \approx 0,83\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Portanto, ao dar um desconto de R&amp;#36; 0,83, ou seja, ao vender suas paÃ§ocas a
R&amp;#36; 4,17, nosso amigo vendedor obterÃ¡ o maior faturamento possÃ­vel ao final do mÃªs.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' &amp;&amp; location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="math"></category></entry><entry><title>Acesso a biblioteca virtual UFGD</title><link href="https://adrianobarbosa.xyz/blog/biblioteca-virtual-ufgd.html" rel="alternate"></link><published>2018-06-26T14:50:00-04:00</published><updated>2018-06-26T14:50:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-06-26:/blog/biblioteca-virtual-ufgd.html</id><summary type="html">&lt;p&gt;VocÃª sabia que a UFGD dispobiliza diversos livros atravÃ©s de uma biblioteca virtual?&lt;/p&gt;
&lt;p&gt;Basta acessar o &lt;a href="https://biblioteca.ufgd.edu.br/"&gt;site da biblioteca&lt;/a&gt;, efetuar login com seu usuÃ¡rio e senha e acessar o menu "Bases" e em seguida "Minha Biblioteca".&lt;/p&gt;
&lt;p&gt;&lt;image alt="Menu de acesso a biblioteca virtual" src="https://adrianobarbosa.xyz/images/blog/biblioteca-virtual-ufgd-1.png" class="image fit thumb"&gt;&lt;/p&gt;
&lt;p&gt;ApÃ³s aceitar os termos de uso do serviÃ§o (leia os termos para ter ciÃªncia â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;VocÃª sabia que a UFGD dispobiliza diversos livros atravÃ©s de uma biblioteca virtual?&lt;/p&gt;
&lt;p&gt;Basta acessar o &lt;a href="https://biblioteca.ufgd.edu.br/"&gt;site da biblioteca&lt;/a&gt;, efetuar login com seu usuÃ¡rio e senha e acessar o menu "Bases" e em seguida "Minha Biblioteca".&lt;/p&gt;
&lt;p&gt;&lt;image alt="Menu de acesso a biblioteca virtual" src="https://adrianobarbosa.xyz/images/blog/biblioteca-virtual-ufgd-1.png" class="image fit thumb"&gt;&lt;/p&gt;
&lt;p&gt;ApÃ³s aceitar os termos de uso do serviÃ§o (leia os termos para ter ciÃªncia dos dados que eles coletam sobre seu acesso!) vocÃª terÃ¡ acesso a diversos tÃ­tulos em qualquer lugar ;-)&lt;/p&gt;
&lt;p&gt;&lt;image alt="Alguns dos tÃ­tulos disponÃ­veis na biblioteca virtual" src="https://adrianobarbosa.xyz/images/blog/biblioteca-virtual-ufgd-2.png" class="image fit thumb"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Agradecimento a Thalia pela dica.&lt;/em&gt;&lt;/p&gt;</content><category term="ufgd"></category></entry><entry><title>Compile Nextcloud client on OpenBSD 6.3</title><link href="https://adrianobarbosa.xyz/blog/compile-nextcloud-client.html" rel="alternate"></link><published>2018-06-06T16:23:00-04:00</published><updated>2018-06-06T17:50:00-04:00</updated><author><name>Adriano Barbosa</name></author><id>tag:adrianobarbosa.xyz,2018-06-06:/blog/compile-nextcloud-client.html</id><summary type="html">&lt;p&gt;Installing dependencies (other dependencies are dependencies of those packages):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;pkg_add&lt;/span&gt; &lt;span class="n"&gt;qtwebkit&lt;/span&gt; &lt;span class="n"&gt;qtkeychain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;qt5&lt;/span&gt; &lt;span class="n"&gt;cmake&lt;/span&gt; &lt;span class="n"&gt;libinotify&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Clone Nextcloud client repository:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/src
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/src
$ git clone https://github.com/nextcloud/client_theming.git nextcloud-client
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Compiling:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;nextcloud&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;
$ &lt;span class="nv"&gt;git&lt;/span&gt; &lt;span class="nv"&gt;submodule&lt;/span&gt; &lt;span class="nv"&gt;update&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;init&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;recursive&lt;/span&gt;
$ &lt;span class="nv"&gt;mkdir&lt;/span&gt; &lt;span class="nv"&gt;build&lt;/span&gt;
$ &lt;span class="nv"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;build&lt;/span&gt;
$ &lt;span class="nv"&gt;cmake&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DOEM_THEME_DIR&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;$&lt;span class="nv"&gt;USER â€¦&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Installing dependencies (other dependencies are dependencies of those packages):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;pkg_add&lt;/span&gt; &lt;span class="n"&gt;qtwebkit&lt;/span&gt; &lt;span class="n"&gt;qtkeychain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;qt5&lt;/span&gt; &lt;span class="n"&gt;cmake&lt;/span&gt; &lt;span class="n"&gt;libinotify&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Clone Nextcloud client repository:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/src
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/src
$ git clone https://github.com/nextcloud/client_theming.git nextcloud-client
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Compiling:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;nextcloud&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;
$ &lt;span class="nv"&gt;git&lt;/span&gt; &lt;span class="nv"&gt;submodule&lt;/span&gt; &lt;span class="nv"&gt;update&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;init&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;recursive&lt;/span&gt;
$ &lt;span class="nv"&gt;mkdir&lt;/span&gt; &lt;span class="nv"&gt;build&lt;/span&gt;
$ &lt;span class="nv"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;build&lt;/span&gt;
$ &lt;span class="nv"&gt;cmake&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DOEM_THEME_DIR&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;$&lt;span class="nv"&gt;USER&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nextcloud&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nextcloudtheme&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_PREFIX_PATH&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;qt5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;cmake&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_C_FLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;-I/usr/local/include -I/usr/local/include/inotify&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_CXX_FLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;-I/usr/local/include -I/usr/local/include/inotify&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_EXE_LINKER_FLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;-L/usr/local/lib -L/usr/local/lib/inotify -Wl,-rpath=/usr/local/lib/inotify -linotify&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DHAVE_ICONV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DHAVE_ICONV_H&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_DISABLE_FIND_PACKAGE_KF5&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;TRUE&lt;/span&gt; \
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;DCMAKE_DISABLE_FIND_PACKAGE_Qt5LinguistTools&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;TRUE&lt;/span&gt; \
    &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;$&lt;span class="nv"&gt;USER&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nextcloud&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;
$ &lt;span class="nv"&gt;make&lt;/span&gt;
$ &lt;span class="nv"&gt;doas&lt;/span&gt; &lt;span class="nv"&gt;make&lt;/span&gt; &lt;span class="nv"&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;everything should be fine! ;-)&lt;/p&gt;
&lt;h2&gt;Running the client&lt;/h2&gt;
&lt;p&gt;Depending on the number of files you sync, you may need to increase the open files limit:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;ulimit&lt;/span&gt; -n &lt;span class="m"&gt;4096&lt;/span&gt;
$ nextcloud
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Increase the &lt;code&gt;ulimit&lt;/code&gt; as your necessity.&lt;/p&gt;</content><category term="comp"></category></entry></feed>